

<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Laptop List</title>
   	<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
   	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
	 <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
	
	
	   <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" th:href="@{/css/style.css}">
     <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
     
     
<style>
/* General styles */
    body {
    font-family: Arial, sans-serif;
    background-color: #f4f4f4;
    margin: 0;
    padding: 0;
}

 /* 
header {
    background: linear-gradient(160deg, #88d3ce, #6e45e2);
    color: #fff;
    padding: 22px 0;
    border-top-right-radius:10px;
    margin-bottom:50px;
}
 
header .container1 {
     display: flex;
}
 
header .pinfo {
    margin: 0;
    margin:auto;
    text-align:center;
    align-items: center;
    justify-content: center;
}
header a {
    text-decoration: none;
    color: inherit;
}

#home {
	margin-top:3px;
    font-size: 35px;
    position:absolute;
    right:3%;
} */
#add{
	margin-left: 5px;
    font-size: 30px;
    position:absolute;
    color: #6e45e2;
}
 
#delete{
	 font-size: 20px;
	 margin-left:30px;
	color: #E33535;
}
#update{
	font-size: 20px;
}
#backward,#forward{
	font-size: 15px;
}

/* Table styles */
table {
    width: 87%;
    margin: 20px auto;
    border-collapse: collapse;
    background: #fff;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);
}

.table-header {
    background:#ccccff;
    color: #fff;
    margin-top:20px;
}

td {
    padding: 10px;
    text-align: left;
    border-bottom: 1px solid #ddd;
    transition: background 0.3s;
    color:black;
}

th {
    font-weight: bold;
    font-size:18px;
    padding:13px;
    color:black;
}

/* Image styles */
img {
    max-width: 120px;
    max-height: 80px;
}

/* Links in table */
a {
    color: #6e45e2;
    text-decoration: none;
    font-weight: bold;
}

/* Responsive design */
@media (max-width: 768px) {
    table {
        width: 100%;
        font-size: 14px;
    }

    th, td {
        padding: 10px;
    }

    .pagination-controls {
        flex-direction: column;
    }
}

 /* Pagination Container */
.pagination-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    margin: 20px 0;
}

.pagination-info {
    font-size: 1rem;
    margin-bottom: 10px;
    color: #333;
}

/* Pagination Controls */
.pagination-controls {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 5px;
}

.pagination-link {
    color: #6e45e2;
    text-decoration: none;
    padding: 8px 12px;
    border-radius: 6px;
    font-weight: bold;
    background:#ccccff;
    transition: background 0.3s, color 0.3s;
}

.pagination-link:hover {
    background: #6e45e2;
    color: #fff;
}

.pagination-link.current {
    background: #6e45e2;
    color: #fff;
}

.pagination-link.disabled {
    color: #ccc;
    cursor: not-allowed;
}

#search {
	width: 200px;
	height: 30px;
	border-radius:10px;
	margin-left: 12px;
}

#searchb {
	width: 80px;
	height: 40px;
	border-radius:20px;
	border-color: white;
	color: white;
	background: linear-gradient(160deg, #88d3ce, #6e45e2);
}

#back {
	margin-top:3px;
    font-size: 32px;
    position:absolute;
    left:3%;
    color:white;
}

form {
	margin-left: 88px;
}

/* Responsive Design */
@media (max-width: 768px) {
    .pagination-info {
        font-size: 0.9rem;
    }

    .pagination-link {
        padding: 6px 10px;
        font-size: 0.9rem;
    }
}

/* Responsive adjustments for phones */
/* Responsive adjustments for phones */
@media (max-width: 480px) {
    header {
        padding: 15px 0; /* Adjust padding for the header */
    }

    .table-responsive {
        width: 100%; /* Full width for the responsive table wrapper */
        overflow-x: auto; 
        				/* Enable horizontal scrolling */
    }

    table {
        width: 100%; /* Full width for the table */
        font-size: 10px; /* Smaller font size for table */
        border-collapse: collapse; /* Ensure borders collapse properly */
        min-width: 600px; /* Set a minimum width to allow scrolling */
    }

    th, td {
        padding: 5px; /* Reduced padding for better fit */
        display: block; /* Stack cells vertically for small screens */
        text-align: left; /* Align text to the left for better readability */
    }

    tr {
        margin-bottom: 10px; /* Space between rows */
        border: 1px solid #ddd; /* Ensure borders are visible */
        border-radius: 8px; /* Add rounded corners */
        background: #fff; /* Ensure the background is white for contrast */
    }

    th {
        display: none; /* Hide headers on small screens */
    }

    td::before {
        content: attr(data-label); /* Use data-label for responsive labels */
        font-weight: bold; /* Make labels bold */
        display: inline-block; /* Display as inline-block for proper formatting */
        width: 50%; /* Label width */
        text-transform: capitalize; /* Capitalize labels */
        font-size: 12px; /* Adjust label font size */
    }

    img {
        max-width: 80px; /* Adjusted image size for thumbnails */
        max-height: 60px; /* Adjusted image height */
    }

    #home, #add {
        font-size: 22px; /* Font size adjustments for icons */
    }

    .pagination-link {
        padding: 4px 6px; /* Adjusted pagination link size */
        font-size: 0.85rem; /* Adjusted pagination font size */
    }

    .pagination-info {
        font-size: 0.85rem; /* Adjusted pagination info size */
        text-align: center; /* Center aligned for better presentation */
    }

    td[data-label="action"] {
        text-align: center; /* Center align action buttons */
    }
}
.short {
	margin-bottom: 0px !important;
}

.alert{
	margin-bottom:10px;
}

   </style>
</head>
<body>
	<header>
       <!--  <div class="container1">
        	<div><a th:href="@{/admin}"><i class="fa-regular fa-circle-left" id="back"></i></a></div>
        	<h1 class="pinfo">Our Inventories</h1>
            <a  th:href="@{/admin}"><i class="material-icons" id="home">home</i></a>
        </div> -->
           <div th:replace="fragments/adminNavbar :: navbar"></div>
     </header>
     
     <div class="short">
  
    
    		<!-- Display Success Alert if the success variable exists -->
    <!-- <div th:if="${success}" class="alert alert-success alert-dismissible fade show" role="alert">
        <span th:text="${success}"></span>
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div> -->

    <!-- Display Error Alert if the error variable exists -->
   <!--  <div th:if="${error}" class="alert alert-danger alert-dismissible fade show" role="alert">
        <span th:text="${error}"></span>
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div> -->
    
    <!-- Display Success Alert if the success variable exists -->
<div th:if="${success}" class="alert alert-success alert-dismissible fade show" role="alert" id="successAlert">
    <span th:text="${success}"></span>
    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
</div>

<!-- Display Error Alert if the error variable exists -->
<div th:if="${error}" class="alert alert-danger alert-dismissible fade show" role="alert" id="errorAlert">
    <span th:text="${error}"></span>
    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
</div>
  
   </div>
    
    <div class="table-responsive">
    <table>
        <thead class="table-header">
            <tr>
                <tr>
				 <th><a th:href="@{'/page/'+${currentPage} + '?sortField=brand_id&sortDir=' + ${reverseSortDir}}">Brand</a></th>
                 <th>
					Model
				</th>
                <th>Image</th>
               
                <th>Price</th>
                <th>Stock</th>
                <th>
                	<a th:href="@{'/page/'+${currentPage} + '?sortField=modelNo&sortDir=' + ${reverseSortDir}}">Model No.</a>
                </th>
              <!--   <th>Serial No.</th> -->
                <th>Specification</th>         	
                <th>Actions<a th:href="@{/admin/laptops/add}"><i class="material-icons" id="add">add_circle_outline</i></a></th>
            	</tr>
        </thead>
        <tbody>
            <tr th:each="laptop : ${listLaptops}">
            
            	 <td th:text="${laptop.brand.brandName}"></td> 
            	 <td th:text="${laptop.laptopName}"></td> 
            	 
             	<td><img th:src="@{'/laptopImages/' + ${laptop.imageName}}" alt="Laptop image"></td>
             		
             	
             	 
             
              <!--    <td th:text="${laptop.modelNo}"></td> -->
                <td th:text="'$'+${laptop.price}"></td>
                <td th:text="${laptop.stock}"></td>
                <td th:text="${laptop.modelNo}"></td>
               <!--  <td th:text="${laptop.serialNo}"></td> -->
                <td th:text="${laptop.specification}"></td>
              <!--   <td th:text="${laptop.brand.brandName}"></td>  -->
               
                <td><a th:href="@{/admin/laptops/update/{id}(id=${laptop.id})}"><i class="fa-solid fa-pen-to-square" id="update"></i></a>
                <a th:href="@{/admin/laptops/delete/{id}(id=${laptop.id})}"><i class="fa-regular fa-trash-can" id="delete" onclick="return confirmDelete()"></i></a></td>
            </tr>     
        </tbody>
   </table>	
   </div>
	
    
    	<div th:if="${totalPages > 1}" class="pagination-container">
    <div class="pagination-controls">
        <span>Total Rows: [[${totalItems}]] &nbsp; &nbsp;</span>

        <!-- Previous -->
        <span>
            <a th:if="${currentPage > 1}" th:href="@{'/page/' + ${currentPage - 1} +'?sortField=' + ${sortField} + '&sortDir=' + ${sortDir}}" class="pagination-link">
                <i class="fa-solid fa-backward-fast" id="backward"></i>
            </a>
            <span th:unless="${currentPage > 1}" class="pagination-link disabled">
                <i class="fa-solid fa-backward-fast" id="backward"></i>
            </span>
        </span>

        <!-- Always Show First Page -->
        <span>
            <a th:if="${currentPage != 1}" th:href="@{'/page/' + 1 +'?sortField=' + ${sortField} + '&sortDir=' + ${sortDir}}" class="pagination-link">1</a>
            <span th:unless="${currentPage != 1}" class="pagination-link current">1</span>
        </span>

        <!-- Show Ellipsis After First Page if Necessary -->
        <span th:if="${currentPage > 4}">
            <span class="pagination-link">...</span>
        </span>

        <!-- Display Middle Pages -->
        <span th:if="${totalPages > 5}">
            <!-- Case: If currentPage is less than or equal to 3, show 2-5 -->
            <span th:each="i : ${#numbers.sequence(2, 5)}" th:if="${currentPage <= 3}">
                <a th:if="${currentPage != i}" th:href="@{'/page/' + ${i} +'?sortField=' + ${sortField} + '&sortDir=' + ${sortDir}}" class="pagination-link">[[${i}]]</a>
                <span th:unless="${currentPage != i}" class="pagination-link current">[[${i}]]</span>
            </span>

            <!-- Case: If currentPage is near the end (e.g., last three pages), show from totalPages - 4 to totalPages - 1 -->
            <span th:each="i : ${#numbers.sequence(totalPages - 4, totalPages - 1)}" th:if="${currentPage >= totalPages - 2}">
                <a th:if="${currentPage != i}" th:href="@{'/page/' + ${i} +'?sortField=' + ${sortField} + '&sortDir=' + ${sortDir}}" class="pagination-link">[[${i}]]</a>
                <span th:unless="${currentPage != i}" class="pagination-link current">[[${i}]]</span>
            </span>

            <!-- Case: If currentPage is in the middle, show currentPage - 2 to currentPage + 2 -->
            <span th:each="i : ${#numbers.sequence(currentPage - 2, currentPage + 2)}" th:if="${currentPage > 3 && currentPage < totalPages - 2}">
                <a th:if="${currentPage != i}" th:href="@{'/page/' + ${i} +'?sortField=' + ${sortField} + '&sortDir=' + ${sortDir}}" class="pagination-link">[[${i}]]</a>
                <span th:unless="${currentPage != i}" class="pagination-link current">[[${i}]]</span>
            </span>
        </span>

        <!-- Show Ellipsis Before Last Page if Necessary -->
        <span th:if="${currentPage < totalPages - 3}">
            <span class="pagination-link">...</span>
        </span>

        <!-- Always Show Last Page -->
        <span>
            <a th:if="${currentPage != totalPages}" th:href="@{'/page/' + ${totalPages} +'?sortField=' + ${sortField} + '&sortDir=' + ${sortDir}}" class="pagination-link">[[${totalPages}]]</a>
            <span th:unless="${currentPage != totalPages}" class="pagination-link current">[[${totalPages}]]</span>
        </span>

        <!-- Next -->
        <span>
            <a th:if="${currentPage < totalPages}" th:href="@{'/page/' + ${currentPage + 1} +'?sortField=' + ${sortField} + '&sortDir=' + ${sortDir}}" class="pagination-link">
                <i class="fa-solid fa-forward-fast" id="forward"></i>
            </a>
            <span th:unless="${currentPage < totalPages}" class="pagination-link disabled">
                <i class="fa-solid fa-forward-fast" id="forward"></i>
            </span>
        </span>

        <span>&nbsp; &nbsp; Page [[${currentPage}]] of [[${totalPages}]]</span>
    </div>
</div>
    
<script>
	function confirmDelete(){
		return window.confirm("Are you sure you want to delete this?");
	
	}
	
	// Function to append custom alert
    function appendAlert(message, type) {
        const alertPlaceholder = document.getElementById('liveAlertPlaceholder');
        const wrapper = document.createElement('div');
        wrapper.innerHTML = `
            <div class="alert alert-${type} alert-dismissible fade show" role="alert">
                ${message}
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
        `;
        alertPlaceholder.append(wrapper);
    }

    // Event listener for button click to show custom alert
    const alertTrigger = document.getElementById('liveAlertBtn');
    alertTrigger.addEventListener('click', () => {
        appendAlert('This is a custom alert message.', 'success');
    });
		
    

    <!-- JavaScript to auto-hide the alerts after 4 seconds -->
   
        // Function to hide the alert after 4 seconds
        setTimeout(function() {
            var successAlert = document.getElementById("successAlert");
            var errorAlert = document.getElementById("errorAlert");
            
            if (successAlert) {
                successAlert.classList.remove("show");
                successAlert.classList.add("hide");
            }
            
            if (errorAlert) {
                errorAlert.classList.remove("show");
                errorAlert.classList.add("hide");
            }
        }, 3000); // 4000 milliseconds = 4 seconds
		
</script>   

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>